using IntervalArithmetic
using Test

@testset "IntervalToText" begin
    @test string(∅, 'u') == "[Empty]"
    @test string(∅, 'l') == "[empty]"
    @test string(Interval(-Inf,Inf), 'f') == "[-Inf,Inf]"
    @test string(∅) == "[Empty]"
    @test string(Interval(-Inf, Inf)) == "[-Inf, Inf]"
    @test string(nai(Float64)) == "[Nai]"
    @test string(Interval(1, 4)) == "[1, 4]"
    @test string(Interval(1.1, 4.1)) == "[1.1, 4.1]"
    @test string(Interval(1.12, 4.13)) == "[1.12, 4.13]"
    @test string(Interval(1.132, 4.231)) == "[1.13, 4.24]"
    @test string(@biginterval(5^(1/3), sqrt(5))) == "[1.7, 2.24]"
    @test string(@biginterval(5^(2/3), sqrt(10))) == "[2.92, 3.17]"
    @test string(1.121 .. 3.413, 14) == "[1.1210,3.414]"
    @test string(1.121 .. 3.143, 15) == "[1.1210,3.1431]"
    @test string(big(5)^(1/3) .. big(6.76455689) , 5) == "[1,7]"
    @test string(big(5)^(1/3) .. big(6.76455689) , 6) == "[1, 7]"
    @test string(big(5)^(1/3) .. big(6.76455689) , 7) == "[1.7,7]"
    @test string(big(5)^(1/3) .. big(6.76455689) , 8) == "[1.70,7]"
    @test string(big(5)^(1/3) .. big(6.76455689) , 9) == "[1.7,6.8]"
    @test string(big(5)^(1/3) .. big(6.76455689) , 10) == "[1.70,6.8]"
    @test string(big(5)^(1/3) .. big(6.76455689) , 11) == "[1.70,6.77]"
    @test string(big(5)^(1/3) .. big(6.76455689) , 12) == "[1.709,6.77]"
    @test string(big(5)^(1/3) .. big(6.76455689) , 13) == "[1.709,6.765]"
    @test string(big(5)^(1/3) .. big(6.76455689) , 14) == "[1.7099,6.765]"
    @test string(big(5)^(1/3) .. big(9.76455689) , 6) == "[1,10]"
    @test string(big(5)^(1/3) .. big(9.76455689) , 7) == "[1, 10]"
    @test string(big(5)^(1/3) .. big(9.76455689) , 8) == "[1.7,10]"
    @test string(big(5)^(1/3) .. big(9.76455689) , 9) == "[1.70,10]"
    @test string(big(5)^(1/3) .. big(9.76455689) , 10) == "[1.70,9.8]"
    string(big(10.76455689)..big(10.7865757765) , 12) == "[10.76,10.8]"
    @test string(big(5)^(1/3) .. big(6.76455689) , 6, 6, 4, 4) == "[1.7099,6.7646]"
    @test string(big(5)^(1/3) .. big(6.76455689) , 6, 7, 4, 4) == "[1.7099, 6.7646]"
    @test string(big(5)^(1/3) .. big(6.76455689) , 7, 7, 4, 4) == "[ 1.7099, 6.7646]"
    @test string(3.21321 .. 4.54345, 8, 8, 4, 4) == "[  3.2132,  4.5435]"
    @test string(3.21321 .. 4.54345, 12, 12, 7, 7) == "[   3.2132099,   4.5434501]"
    @test string(3.21321 .. 4.54345, 12, 12, 7, 8) == "[   3.2132099,  4.54345001]"
    @test string(3.21321 .. 4.54345, 12, 12, 8, 8) == "[  3.21320999,  4.54345001]"
    @test string(3.21321 .. 4.54345, 12, 12, 9, 9) == "[ 3.213209999, 4.543450001]"

    @test string(2.5 .. 2.7, '?') == "2.6?2"
    @test string(1.1 .. 1.5 , '?') == "1.2?3"
    @test string(2.48 .. 2.88 , '?') == "2.6?3"
    @test string(big(2.28) .. big(2.88) , '?') == "2.5?4"
    @test string(big(2.38) .. big(2.88) , '?') == "2.6?3"
    @test string(4.45346455445463 .. 6.255344346345346 , '?') == "5?2"
    @test string(1 .. 3, '?') == "2?2"
end
