using Test
using IntervalArithmetic

@testset "rational_power_test" begin
    @test ^(emptyinterval(), 1//3) == emptyinterval()
    @test ^(interval(1, 8), 1//3) == interval(1, 2)
    @test ^(interval(2, 8), 1//3) ⊇  interval(2^(1//3), 2)
    @test ^(interval(1, 9), 1//3) ⊇  interval(1, 9^(1//3))
    @test ^(interval(2, 9), 1//3) ⊇  interval(2^(1//3), 9^(1//3))
    @test ^(interval(-1, 8), 1//3) == interval(0, 2)
    @test ^(interval(-2, 8), 1//3) ⊇  interval(0, 2)
    @test ^(interval(-1, 9), 1//3) ⊇  interval(0, 9^(1//3))
    @test ^(interval(-2, 9), 1//3) ⊇  interval(0, 9^(1//3))
    @test ^(interval(1, 8), -1//3) == interval(0.5, 1)
    @test ^(interval(2, 8), -1//3) ⊇  interval(0.5, 2^(-1//3))
    @test ^(interval(1, 9), -1//3) ⊇  interval(9^(-1//3), 1)
    @test ^(interval(2, 9), -1//3) ⊇  interval(9^(-1//3), 2^(-1//3))
    @test ^(interval(-1, 8), -1//3) == interval(0.5, Inf)
    @test ^(interval(-2, 8), -1//3) ⊇  interval(0.5, Inf)
    @test ^(interval(-1, 9), -1//3) ⊇  interval(9^(-1//3), Inf)
    @test ^(interval(-2, 9), -1//3) ⊇  interval(9^(-1//3), Inf)
    @test ^(interval(-2, 4), 1//2) == interval(0, 2)
    @test ^(interval(-2, 8), 1//3) == interval(0, 2)
    @test ^(interval(-8, -2), 1//3) == emptyinterval()
    @test ^(interval(-8, -2), 1//2) == emptyinterval()
    @test ^(interval(-8, -2), -1//3) == emptyinterval()
    @test ^(interval(-8, -2), -1//2) == emptyinterval()
    @test ^(emptyinterval(), 2//3) == emptyinterval()
    @test ^(interval(1, 8), 2//3) == interval(1, 4)
    @test ^(interval(2, 8), 2//3) ⊇  interval(2^(2//3), 4)
    @test ^(interval(1, 9), 2//3) ⊇  interval(1, 9^(2//3))
    @test ^(interval(2, 9), 2//3) ⊇  interval(2^(2//3), 9^(2//3))
    @test ^(interval(-1, 8), 2//3) == interval(0, 4)
    @test ^(interval(-2, 8), 2//3) ⊇  interval(0, 4)
    @test ^(interval(-1, 9), 2//3) ⊇  interval(0, 9^(2//3))
    @test ^(interval(-2, 9), 2//3) ⊇  interval(0, 9^(2//3))
    @test ^(interval(1, 8), -2//3) == interval(0.25, 1)
    @test ^(interval(2, 8), -2//3) ⊇  interval(0.25, 2^(-2//3))
    @test ^(interval(1, 9), -2//3) ⊇  interval(9^(-2//3), 1)
    @test ^(interval(2, 9), -2//3) ⊇  interval(9^(-2//3), 2^(-2//3))
    @test ^(interval(-1, 8), -2//3) == interval(0.25, Inf)
    @test ^(interval(-2, 8), -2//3) ⊇  interval(0.25, Inf)
    @test ^(interval(-1, 9), -2//3) ⊇  interval(9^(-2//3), Inf)
    @test ^(interval(-2, 9), -2//3) ⊇  interval(9^(-2//3), Inf)
    @test ^(interval(-2, 4), 3//2) == interval(0, 8)
    @test ^(interval(-2, 8), 2//3) == interval(0, 4)
    @test ^(interval(-8, -2), 2//3) == emptyinterval()
    @test ^(interval(-8, -2), 3//2) == emptyinterval()
    @test ^(interval(-8, -2), -2//3) == emptyinterval()
    @test ^(interval(-8, -2), -3//2) == emptyinterval()
    @test ^(interval(-1, 1), 1000000000000000000000000000000000000000//1) == interval(0, 1)
end
